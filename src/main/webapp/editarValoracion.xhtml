<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:f="jakarta.faces.core"
                template="/WEB-INF/plantillas/general.xhtml">

    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="id" value="#{valoracionCtrl.valoracion.id}" />
            <f:event type="preRenderView" listener="#{valoracionCtrl.cargarValoracion()}" />
        </f:metadata>

        <h:outputStylesheet library="css" name="estrellas.css" />

        <h1 class="text-center mb-4">Editar Valoración</h1>

        <div class="container" style="max-width: 800px;">
            <h:form styleClass="card p-4 shadow">

                <div class="row mb-3">
                    <div class="col-md-2">
                        <label for="id" class="form-label">ID:</label>
                        <h:inputText id="id" styleClass="form-control"
                                     value="#{valoracionCtrl.valoracion.id}" disabled="true" />
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="Matricula" class="form-label">Matrícula:</label>
                        <h:inputText id="Matricula" styleClass="form-control"
                                     value="#{valoracionCtrl.valoracion.matricula}" required="true"
                                     validator="#{valoracionCtrl.validarMatricula}" />
                        <h:message styleClass="form-text text-danger" for="Matricula" />
                    </div>

                    <div class="col-md-6">
                        <h:outputLabel for="dni" value="DNI:" class="mb-2 text-muted" />
                        <h:inputText id="dni" value="#{valoracionCtrl.valoracion.dniUsuario}" class="form-control"
                                     required="true" validator="#{valoracionCtrl.validarDNI}" />
                        <h:message for="dni" styleClass="form-text text-danger" />
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Estrellas:</label>
                    <div class="star-rating">

                        <h:selectOneRadio value="#{valoracionCtrl.valoracion.estrellas}"
                                          required="true" layout="pageDirection" styleClass="d-none star-radio">
                            <f:selectItem itemValue="1" itemLabel="★" />
                            <f:selectItem itemValue="2" itemLabel="★★" />
                            <f:selectItem itemValue="3" itemLabel="★★★" />
                            <f:selectItem itemValue="4" itemLabel="★★★★" />
                            <f:selectItem itemValue="5" itemLabel="★★★★★" />
                        </h:selectOneRadio>

                        <div class="stars">
                            <span data-value="1">★</span>
                            <span data-value="2">★</span>
                            <span data-value="3">★</span>
                            <span data-value="4">★</span>
                            <span data-value="5">★</span>
                        </div>
                    </div>

                </div>

                <div class="mb-3">
                    <label for="idDescripcion" class="form-label">Descripción:</label>
                    <h:inputTextarea id="idDescripcion" styleClass="form-control" rows="3"
                                     value="#{valoracionCtrl.valoracion.descripcion}" required="true" />
                    <h:message styleClass="form-text text-danger" for="idDescripcion" />
                </div>

                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <h:commandButton styleClass="btn btn-success me-md-2" value="Guardar"
                                     action="#{valoracionCtrl.actualizarValoracion()}" />
                    <h:button styleClass="btn btn-outline-success" value="Salir" outcome="gestionValoraciones" />
                </div>
            </h:form>
        </div>

        <h:outputScript library="js" name="estrellasEditar.js" />
    </ui:define>
</ui:composition>


