<ui:composition
        xmlns:h="jakarta.faces.html"
        xmlns:f="jakarta.faces.core"
        xmlns:ui="jakarta.faces.facelets"
        template="/WEB-INF/plantillas/general.xhtml">

    <ui:define name="content">
        <h:outputStylesheet library="css" name="gestion.css"/>
        <h:form>
            <div class="container">
                <h2 class="titulo text-center mb-4">Gestión de Valoraciones</h2>

                <div class="d-flex justify-content-end mb-3">
                    <h:button value="Crear Valoración" outcome="crearValoracion" styleClass="btn btn-success"/>
                </div>

                <table class="table table-striped table-bordered">
                    <thead class="table-dark">
                    <tr>
                        <th>DNI</th>
                        <th>Matrícula</th>
                        <th>Número de Estrellas</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <ui:repeat value="#{valoracionCtrl.listarValoraciones()}" var="valoracion">
                        <tr>
                            <td>#{valoracion.dniUsuario}</td>
                            <td>#{valoracion.matricula}</td>
                            <td>#{valoracion.estrellas}</td>
                            <td>
                                <h:button value="Ver"  outcome="verValoracion" styleClass="btn btn-success btn-sm me-3">
                                    <f:param name="id" value="#{valoracion.id}" />
                                </h:button>
                                <h:button value="Editar"
                                          styleClass="btn btn-success btn-sm me-3"
                                          outcome="editarValoracion">
                                    <f:param name="id" value="#{valoracion.id}" />
                                </h:button>
                                <h:commandButton value="Borrar"
                                                 styleClass="btn btn-success btn-sm"
                                                 action="#{valoracionCtrl.eliminarValoracion(valoracion)}"
                                                 onclick="return confirm('¿Está seguro de que desea eliminar esta valoración?');"/>

                            </td>
                        </tr>
                    </ui:repeat>
                    </tbody>
                </table>

                <nav>
                    <ul class="pagination justify-content-center">
                        <li class="page-item">
                            <h:commandLink value="Anterior" styleClass="page-link text-success"/>
                        </li>
                        <li class="page-item">
                            <h:commandLink value="1" styleClass="page-link text-success"/>
                        </li>
                        <li class="page-item">
                            <h:commandLink value="2" styleClass="page-link text-success"/>
                        </li>
                        <li class="page-item">
                            <h:commandLink value="3" styleClass="page-link text-success"/>
                        </li>
                        <li class="page-item">
                            <h:commandLink value="Siguiente" styleClass="page-link text-success"/>
                        </li>
                    </ul>
                </nav>
            </div>
        </h:form>
    </ui:define>
</ui:composition>